<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>My Lex V2 Bot</title>
<style>
body { font-family: Arial; background: #f4f4f4; }
.chat-container { max-width: 500px; margin: 50px auto; padding: 20px; background: #fff; border-radius: 10px; }
.messages { height: 300px; overflow-y: auto; border: 1px solid #ddd; padding: 10px; margin-bottom: 10px; }
.message.user { color: blue; }
.message.bot { color: green; }
input { width: 80%; padding: 10px; }
button { padding: 10px 15px; }
</style>
</head>
<body>
<div class="chat-container">
    <div class="messages" id="chatMessages"></div>
    <input type="text" id="userMessage" placeholder="Type your message...">
    <button id="sendBtn">Send</button>
</div>

<script>
const apiURL = "https://qk0m1soby9.execute-api.ap-southeast-1.amazonaws.com/"; // Replace with your API Gateway URL

async function sendMessage(message) {
    const chatBox = document.getElementById("chatMessages");

    // Display user message
    const userDiv = document.createElement("div");
    userDiv.className = "message user";
    userDiv.textContent = "You: " + message;
    chatBox.appendChild(userDiv);

    try {
        const response = await fetch(apiURL, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ message })
        });

        const data = await response.json();

        // Lex V2 can return multiple messages
        const botReply = Array.isArray(data.reply) ? data.reply.join(" ") : data.reply;

        const botDiv = document.createElement("div");
        botDiv.className = "message bot";
        botDiv.textContent = "Bot: " + botReply;
        chatBox.appendChild(botDiv);

        chatBox.scrollTop = chatBox.scrollHeight;
    } catch (err) {
        console.error(err);
        const botDiv = document.createElement("div");
        botDiv.className = "message bot";
        botDiv.textContent = "Bot: Unable to fetch response.";
        chatBox.appendChild(botDiv);
    }
}

document.getElementById("sendBtn").addEventListener("click", () => {
    const input = document.getElementById("userMessage");
    if(input.value.trim()) {
        sendMessage(input.value.trim());
        input.value = "";
    }
});
</script>
</body>
</html>

    
        
